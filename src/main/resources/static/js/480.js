"use strict";(self["webpackChunktableorder4"]=self["webpackChunktableorder4"]||[]).push([[480],{6480:function(e,t,a){a.r(t),a.d(t,{default:function(){return ot}});var o=a(6768);const l={class:"register-wrap"},i={class:"view-wrap"};function s(e,t,a,s,p,n){const m=(0,o.g2)("SidebarField"),r=(0,o.g2)("RouterView"),c=(0,o.g2)("PopupField");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(m),(0,o.Lk)("div",i,[(0,o.bF)(r,{ref:"displays",onSetDisplay:n.setDisplay,onSetData:n.setData,onSetMethod:n.setMethod,onOpenPop:n.openPop},null,8,["onSetDisplay","onSetData","onSetMethod","onOpenPop"])]),(0,o.bF)(c,{ref:"popup",popType:p.display,onGetData:n.getData},null,8,["popType","onGetData"])])}const p={class:"sidebar-wrapper"},n=(0,o.Lk)("figure",{class:"logo-img"},[(0,o.Lk)("img",{src:"/assets/img/logo.png",alt:"OneOrder",id:"logo"})],-1),m={class:"sidebar-list"},r={class:"sidebar-item"},c={class:"sidebar-item"},u={class:"sidebar-item"},d={class:"sidebar-item"},y={class:"sidebar-item"};function b(e,t,a,l,i,s){const b=(0,o.g2)("RouterLink");return(0,o.uX)(),(0,o.CE)("div",p,[n,(0,o.Lk)("ul",m,[(0,o.Lk)("li",r,[(0,o.bF)(b,{class:"sidebar-btn",to:"/master/regi"},{default:(0,o.k6)((()=>[(0,o.eW)("会計")])),_:1})]),(0,o.Lk)("li",c,[(0,o.bF)(b,{class:"sidebar-btn",to:"/master/history"},{default:(0,o.k6)((()=>[(0,o.eW)("取引履歴")])),_:1})]),(0,o.Lk)("li",u,[(0,o.bF)(b,{class:"sidebar-btn",to:"/master/merchandice"},{default:(0,o.k6)((()=>[(0,o.eW)("商品一覧")])),_:1})]),(0,o.Lk)("li",d,[(0,o.bF)(b,{class:"sidebar-btn",to:"/master/category"},{default:(0,o.k6)((()=>[(0,o.eW)("カテゴリ一覧")])),_:1})]),(0,o.Lk)("li",y,[(0,o.bF)(b,{class:"sidebar-btn",to:"/master/table"},{default:(0,o.k6)((()=>[(0,o.eW)("テーブル一覧")])),_:1})])])])}var g={name:"SidebarField"},k=a(1241);const D=(0,k.A)(g,[["render",b]]);var h=D;const L={class:"popup-wrap"},f={key:0,id:"popup",class:"popup item-pop"},v={class:"popup-content"},C=(0,o.Lk)("span",{class:"close-btn"},"×",-1),P={key:0},T={key:1};function F(e,t,a,l,i,s){const p=(0,o.g2)("MerchPop"),n=(0,o.g2)("TablePop"),m=(0,o.g2)("CatPop");return(0,o.uX)(),(0,o.CE)("div",L,[s.isNeedPop()?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",v,[C,a.popType.data?((0,o.uX)(),(0,o.CE)("h2",T,"編集")):((0,o.uX)(),(0,o.CE)("h2",P,"追加")),"items"===a.popType.name?((0,o.uX)(),(0,o.Wv)(p,{key:2,ref:"popView",item:a.popType.data,onClosePop:s.closePopup},null,8,["item","onClosePop"])):"table"===a.popType.name?((0,o.uX)(),(0,o.Wv)(n,{key:3,ref:"popView",item:a.popType.data,onClosePop:s.closePopup},null,8,["item","onClosePop"])):"category"===a.popType.name?((0,o.uX)(),(0,o.Wv)(m,{key:4,ref:"popView",item:a.popType.data,onClosePop:s.closePopup},null,8,["item","onClosePop"])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])}var w=a(5130);const X={class:"form-wrap"},E=(0,o.Lk)("label",{for:"tableName"},"テーブル名",-1),N=(0,o.Lk)("label",{for:"low-capacity"},"最低収容人数",-1),S=(0,o.Lk)("label",{for:"capacity"},"最大収容人数",-1),O={class:"form-row"},V=(0,o.Lk)("label",{for:"smoking"},"禁煙・喫煙",-1),U=(0,o.Lk)("option",{value:"禁煙"},"禁煙",-1),$=(0,o.Lk)("option",{value:"喫煙"},"喫煙",-1),q=[U,$],I=(0,o.Lk)("label",{for:"type"},"席タイプ",-1),A=(0,o.Lk)("option",{value:"テーブル"},"テーブル",-1),_=(0,o.Lk)("option",{value:"個室"},"個室",-1),J=(0,o.Lk)("option",{value:"カウンター"},"カウンター",-1),M=[A,_,J],W=(0,o.Lk)("p",null,"表示",-1),x=(0,o.Lk)("button",{type:"submit",class:"save-button"},"保存",-1),j=(0,o.Lk)("label",{for:"tableName"},"テーブル名",-1),B=(0,o.Lk)("label",{for:"low-capacity"},"最低収容人数",-1),G=(0,o.Lk)("label",{for:"capacity"},"最大収容人数",-1),R=["min"],K={class:"form-row"},Q=(0,o.Lk)("label",{for:"smoking"},"禁煙・喫煙",-1),z=(0,o.Lk)("option",{value:"禁煙"},"禁煙",-1),H=(0,o.Lk)("option",{value:"喫煙"},"喫煙",-1),Y=[z,H],Z=(0,o.Lk)("label",{for:"type"},"席タイプ",-1),ee=(0,o.Lk)("option",{value:"テーブル"},"テーブル",-1),te=(0,o.Lk)("option",{value:"個室"},"個室",-1),ae=(0,o.Lk)("option",{value:"カウンター"},"カウンター",-1),oe=[ee,te,ae],le=(0,o.Lk)("p",null,"表示",-1),ie=(0,o.Lk)("button",{type:"submit",class:"save-button"},"保存",-1);function se(e,t,a,l,i,s){return(0,o.uX)(),(0,o.CE)("div",X,[i.itemData?((0,o.uX)(),(0,o.CE)("form",{key:0,id:"editForm",onSubmit:t[7]||(t[7]=(0,w.D$)(((...e)=>s.updateData&&s.updateData(...e)),["prevent"]))},[E,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"tableName",name:"tableName","onUpdate:modelValue":t[0]||(t[0]=e=>i.itemData.name=e),required:""},null,512),[[w.Jo,i.itemData.name]]),N,(0,o.bo)((0,o.Lk)("input",{type:"number",name:"lowcapacity",id:"low-capacity","onUpdate:modelValue":t[1]||(t[1]=e=>i.itemData.low_capacity=e)},null,512),[[w.Jo,i.itemData.low_capacity]]),S,(0,o.bo)((0,o.Lk)("input",{type:"number",name:"capacity",id:"capacity","onUpdate:modelValue":t[2]||(t[2]=e=>i.itemData.capacity=e)},null,512),[[w.Jo,i.itemData.capacity]]),(0,o.Lk)("div",O,[(0,o.Lk)("div",null,[V,(0,o.bo)((0,o.Lk)("select",{id:"smoking",name:"smoking","onUpdate:modelValue":t[3]||(t[3]=e=>i.itemData.smoking=e)},q,512),[[w.u1,i.itemData.smoking]])]),(0,o.Lk)("div",null,[I,(0,o.bo)((0,o.Lk)("select",{id:"type",name:"type","onUpdate:modelValue":t[4]||(t[4]=e=>i.itemData.type=e)},M,512),[[w.u1,i.itemData.type]])])]),W,i.itemData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[5]||(t[5]=e=>s.btnToggle(i.itemData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[6]||(t[6]=e=>s.btnToggle(i.itemData))},"OFF")),x],32)):((0,o.uX)(),(0,o.CE)("form",{key:1,id:"editForm",onSubmit:t[15]||(t[15]=(0,w.D$)(((...e)=>s.sendData&&s.sendData(...e)),["prevent"]))},[j,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"tableName",name:"tableName","onUpdate:modelValue":t[8]||(t[8]=e=>i.tableData.name=e),required:""},null,512),[[w.Jo,i.tableData.name]]),B,(0,o.bo)((0,o.Lk)("input",{type:"number",name:"lowcapacity",id:"low-capacity","onUpdate:modelValue":t[9]||(t[9]=e=>i.tableData.low_capacity=e),min:"1"},null,512),[[w.Jo,i.tableData.low_capacity]]),G,(0,o.bo)((0,o.Lk)("input",{type:"number",name:"capacity",id:"capacity",min:i.tableData.low_capacity,"onUpdate:modelValue":t[10]||(t[10]=e=>i.tableData.capacity=e)},null,8,R),[[w.Jo,i.tableData.capacity]]),(0,o.Lk)("div",K,[(0,o.Lk)("div",null,[Q,(0,o.bo)((0,o.Lk)("select",{id:"smoking",name:"smoking","onUpdate:modelValue":t[11]||(t[11]=e=>i.tableData.smoking=e)},Y,512),[[w.u1,i.tableData.smoking]])]),(0,o.Lk)("div",null,[Z,(0,o.bo)((0,o.Lk)("select",{id:"type",name:"type","onUpdate:modelValue":t[12]||(t[12]=e=>i.tableData.type=e)},oe,512),[[w.u1,i.tableData.type]])])]),le,i.tableData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[13]||(t[13]=e=>s.btnToggle(i.tableData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[14]||(t[14]=e=>s.btnToggle(i.tableData))},"OFF")),ie],32))])}var pe=a(4821),ne={name:"TablePop",data(){return{itemData:{},displayBool:!1,tempData:{},tableData:{}}},mounted(){this.tableData.name="",this.tableData.low_capacity=1,this.tableData.capacity=4,this.tableData.smoking="禁煙",this.tableData.type="テーブル",this.tableData.display=!1},methods:{setData(e){this.itemData=e?Object.assign({},this.itemData,e):null},btnToggle(e){e.display?e.display=!1:e.display=!0},sendData(){(0,pe.A)("/api/master/tables","POST",this.tableData),this.closePopup()},updateData(){(0,pe.A)("/api/master/tables","PUT",this.itemData),this.closePopup()},closePopup(){this.$emit("closePop")}},emits:["closePop"]};const me=(0,k.A)(ne,[["render",se]]);var re=me,ce=a(4232);const ue={class:"form-wrap"},de=(0,o.Lk)("label",{for:"itemName"},"商品名",-1),ye=(0,o.Lk)("label",{for:"category"},"カテゴリ",-1),be=["value"],ge=(0,o.Lk)("label",{for:"price"},"価格",-1),ke=(0,o.Lk)("label",{for:"itemImage"},"商品画像",-1),De=(0,o.Lk)("input",{type:"file",id:"itemImage",name:"itemImage",accept:"image/*"},null,-1),he=(0,o.Lk)("p",null,"表示",-1),Le=(0,o.Lk)("button",{type:"submit",class:"save-button"},"保存",-1),fe=(0,o.Lk)("p",{class:"error-msg"},null,-1),ve=(0,o.Lk)("label",{for:"itemName"},"商品名",-1),Ce=(0,o.Lk)("label",{for:"category"},"カテゴリ",-1),Pe=["value"],Te=(0,o.Lk)("label",{for:"price"},"価格",-1),Fe=(0,o.Lk)("label",{for:"itemImage"},"商品画像",-1),we=(0,o.Lk)("input",{type:"file",id:"itemImage",name:"itemImage",accept:"image/*"},null,-1),Xe=(0,o.Lk)("p",null,"表示",-1),Ee=(0,o.Lk)("button",{type:"submit",class:"save-button"},"保存",-1),Ne=(0,o.Lk)("p",{class:"error-msg"},null,-1);function Se(e,t,a,l,i,s){return(0,o.uX)(),(0,o.CE)("div",ue,[i.itemData?((0,o.uX)(),(0,o.CE)("form",{key:0,id:"editForm",onSubmit:t[5]||(t[5]=(0,w.D$)(((...e)=>s.updateData&&s.updateData(...e)),["prevent"]))},[de,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"itemName",name:"itemName","onUpdate:modelValue":t[0]||(t[0]=e=>i.itemData.itemName=e),required:""},null,512),[[w.Jo,i.itemData.itemName]]),ye,(0,o.bo)((0,o.Lk)("select",{id:"category",name:"category","onUpdate:modelValue":t[1]||(t[1]=e=>i.itemData.category=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categorys,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:t},(0,ce.v_)(e.name),9,be)))),128))],512),[[w.u1,i.itemData.category]]),ge,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"price",name:"price","onUpdate:modelValue":t[2]||(t[2]=e=>i.itemData.price=e),required:""},null,512),[[w.Jo,i.itemData.price]]),ke,De,he,i.itemData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[3]||(t[3]=e=>s.btnToggle(i.itemData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[4]||(t[4]=e=>s.btnToggle(i.itemData))},"OFF")),Le,fe],32)):((0,o.uX)(),(0,o.CE)("form",{key:1,id:"editForm",onSubmit:t[11]||(t[11]=(0,w.D$)(((...e)=>s.sendData&&s.sendData(...e)),["prevent"]))},[ve,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"itemName",name:"itemName","onUpdate:modelValue":t[6]||(t[6]=e=>i.merchData.name=e),required:""},null,512),[[w.Jo,i.merchData.name]]),Ce,(0,o.bo)((0,o.Lk)("select",{id:"category",name:"category","onUpdate:modelValue":t[7]||(t[7]=e=>i.merchData.category=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categorys,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:t},(0,ce.v_)(e.name),9,Pe)))),128))],512),[[w.u1,i.merchData.category]]),Te,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"price",name:"price","onUpdate:modelValue":t[8]||(t[8]=e=>i.merchData.price=e),required:""},null,512),[[w.Jo,i.merchData.price]]),Fe,we,Xe,i.merchData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[9]||(t[9]=e=>s.btnToggle(i.merchData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[10]||(t[10]=e=>s.btnToggle(i.merchData))},"OFF")),Ee,Ne],32))])}var Oe={name:"MerchPop",data(){return{itemData:{},displayBool:!1,tempData:{},categorys:[],merchData:{}}},props:{item:Object},mounted(){this.merchData.name="",this.merchData.category=null,this.merchData.price=0,this.merchData.display=!1,this.merchData.image="assets/img/noimage.png",this.$el.querySelector("#itemImage").value=null,(0,pe.A)("/api/master/categorys").then((e=>e.json())).then((e=>{this.categorys=e}))},methods:{setData(e){this.itemData=e?Object.assign({},this.itemData,e):null},btnToggle(e){e.display?e.display=!1:e.display=!0},sendData(){const e=document.querySelector("#itemImage"),t=e.files[0];if(t){this.merchData.image=`upload/img/${t.name}`;const e=new FormData;e.append("images",t,t.name);const a={method:"POST",body:e};fetch("/api/master/upload/merchImage",a).then((e=>{if(413===e.status){const e=document.querySelector(".error-msg");e.textContent="画像ファイルの容量が大きすぎます"}}))}(0,pe.A)("/api/master/insertMerch","POST",this.merchData),this.closePopup()},updateData(){const e=document.querySelector("#itemImage"),t={name:this.itemData.itemName,category:this.itemData.itemImage,price:this.itemData.price,display:this.itemData.display,image:this.itemData.itemImage},a=e.files[0];if(a){t.image="upload/img/"+a.name;const e=new FormData;e.append("images",a);const o={method:"PUT",body:e};fetch("/api/master/update/merchImage",o).then((e=>{if(413===e.status){const e=document.querySelector(".error-msg");e.textContent="画像ファイルの容量が大きすぎます"}}))}(0,pe.A)("/api/master/insertMerch","PUT",t),this.closePopup()},closePopup(){this.$emit("closePop")}},emits:["closePop"]};const Ve=(0,k.A)(Oe,[["render",Se]]);var Ue=Ve;const $e={class:"form-wrap"},qe=(0,o.Lk)("label",{for:"categoryName"},"カテゴリー名",-1),Ie=["value"],Ae=(0,o.Lk)("br",null,null,-1),_e=(0,o.Lk)("p",null,"色",-1),Je=["value"],Me=(0,o.Lk)("p",null,"表示",-1),We=(0,o.Lk)("button",{type:"submit",class:"save-button"},"保存",-1),xe=(0,o.Lk)("label",{for:"categoryName"},"カテゴリー名",-1),je=(0,o.Lk)("br",null,null,-1),Be=(0,o.Lk)("label",{for:"categoryColor"},"色",-1),Ge=(0,o.Lk)("p",null,"表示",-1),Re=(0,o.Lk)("button",{type:"submit",class:"save-button"},"登録",-1);function Ke(e,t,a,l,i,s){return(0,o.uX)(),(0,o.CE)("div",$e,[i.itemData?((0,o.uX)(),(0,o.CE)("form",{key:0,id:"editForm",onSubmit:t[2]||(t[2]=(0,w.D$)(((...e)=>s.updateData&&s.updateData(...e)),["prevent"]))},[qe,(0,o.Lk)("input",{type:"text",id:"categoryName",name:"categoryName",value:i.itemData.name,required:""},null,8,Ie),Ae,_e,(0,o.Lk)("input",{type:"color",name:"categoryColor",id:"categoryColor",value:i.itemData.color,required:""},null,8,Je),Me,i.catData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[0]||(t[0]=e=>s.btnToggle(i.itemData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[1]||(t[1]=e=>s.btnToggle(i.itemData))},"OFF")),We],32)):((0,o.uX)(),(0,o.CE)("form",{key:1,id:"editForm",onSubmit:t[7]||(t[7]=(0,w.D$)(((...e)=>s.sendData&&s.sendData(...e)),["prevent"]))},[xe,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"categoryName",name:"categoryName","onUpdate:modelValue":t[3]||(t[3]=e=>i.catData.name=e),required:""},null,512),[[w.Jo,i.catData.name]]),je,Be,(0,o.bo)((0,o.Lk)("input",{type:"color",name:"categoryColor",id:"categoryColor","onUpdate:modelValue":t[4]||(t[4]=e=>i.catData.color=e),required:""},null,512),[[w.Jo,i.catData.color]]),Ge,i.catData.display?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",id:"display-toggle",class:"display-toggle active",onClick:t[5]||(t[5]=e=>s.btnToggle(i.catData))},"ON")):((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",id:"display-toggle",class:"display-toggle",onClick:t[6]||(t[6]=e=>s.btnToggle(i.catData))},"OFF")),Re],32))])}var Qe={name:"CatPop",data(){return{itemData:{},displayBool:!1,tempData:{},categorys:[],catData:{}}},props:{item:Object},mounted(){this.catData.name="",this.catData.color="#ffffff",this.catData.display=!1},methods:{setData(e){this.itemData=e?Object.assign({},this.itemData,e):null},btnToggle(e){e.display?e.display=!1:e.display=!0},sendData(){(0,pe.A)("/api/master/category","POST",this.catData),this.closePopup()},updateData(){(0,pe.A)("/api/master/category","PUT",this.itemData),this.closePopup()},closePopup(){this.$emit("closePop")}},emits:["closePop"]};const ze=(0,k.A)(Qe,[["render",Ke]]);var He=ze,Ye={name:"PopupField",components:{TablePop:re,MerchPop:Ue,CatPop:He},props:{popType:Object},methods:{showPopup(){const e=this.$el.querySelector(".popup");this.popType.data?this.$refs.popView.setData(this.popType.data):this.$refs.popView.setData(null),e.style.display="block",this.$el.querySelector(".close-btn").addEventListener("click",(()=>{e.style.display=""}))},isNeedPop(){const e=["table","items","category"];return e.some((e=>e===this.popType.name))},closePopup(){this.$emit("getData"),this.$el.querySelector(".popup").style.display=""}},emits:["getData"]};const Ze=(0,k.A)(Ye,[["render",F]]);var et=Ze,tt={name:"RegiMaster",components:{SidebarField:h,PopupField:et},data(){return{display:{name:"regi",data:null,method:"GET"}}},methods:{setDisplay(e){this.display.name=e},setData(e){this.display.data=e},setMethod(e){this.display.method=e},openPop(){this.$refs.popup.showPopup()},openPopWithData(e){this.setData(e),this.openPop()},getData(){switch(this.display.name){case"items":this.$refs.displays.getItems();break;case"category":this.$refs.displays.getCategorys();break;case"table":this.$refs.displays.getTables();break;default:break}}}};const at=(0,k.A)(tt,[["render",s]]);var ot=at}}]);
//# sourceMappingURL=480.js.map