{"version":3,"file":"js/757.js","mappings":"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","sources":["webpack://tableorder4/./src/views/CartField.vue","webpack://tableorder4/./src/views/CartField.vue?89c0"],"sourcesContent":["<template>\n    <div class=\"cart\" v-if=\"orders.cart.length > 0\">\n        <table>\n            <tr>\n                <th>商品名</th>\n                <th>商品画像</th>\n                <th>単価</th>\n                <th>注文数</th>\n                <th>削除</th>\n            </tr>\n            <tr v-for=\"(order, key) in orders.cart\" :key=\"key\">\n                <td>{{ order.item.merch_name }}</td>\n                <td><img class=\"cart-img\" :src=\"'/' + order.item.image\" :alt=\"order.item.merch_name\"></td>\n                <td>{{ order.item.price }}¥</td>\n                <td>\n                    <div :id=\"key\">\n                        <InputNumber v-model=\"order.amount\" :inputId=\"'minmax-buttons key' + key\" mode=\"decimal\" showButtons buttonLayout=\"vertical\" :min=\"1\" :max=\"20\" fluid/>\n                    </div>\n                </td>\n                <td><button type=\"button\" @click=\"removeOrder(key)\">削除</button></td>\n            </tr>\n        </table>\n        \n        <button class=\"order-btn\" type=\"button\" @click=\"doOrder\">注文する</button>\n    </div>\n    <section v-else>\n        <h2 class=\"no-order\">まだカートに何も入っていません</h2>\n    </section>\n</template>\n\n<script>\nimport Ajax from '@/lib/Ajax';\nimport InputNumber from 'primevue/inputnumber';\n\nexport default {\n    name: 'CartField',\n    components: {\n        InputNumber\n    },\n    props: {\n        orders: Object\n    },\n    data() {\n        return {\n        }\n    },\n    methods: {\n        /**\n         * カート内にある注文を取り消す処理\n         * @param {*} id \n         */\n        removeOrder(id) {\n            const order = this.orders.cart;\n            // 被り検索\n            const filtered = this.orders.cart.filter(elm => {\n                // elmの中身 が 引数として受け取ったidの注文と同じでない場合に返ってくる\n                return elm != this.orders.cart[id];\n            });\n\n            // 実際の注文を該当した部分からずらして、最後に一番後ろの中身を削除する\n            for(let i = id;i < order.length;i++) {\n                if(filtered[i]) {\n                    order[i] = filtered[i];\n                } else {\n                    // The 破壊的(???)\n                    order.reverse().shift();\n                    order.reverse();\n                    // この処理普通にゴリ押しすぎる気がするけど対処法ある方教えていただけたら幸いです。\n                }\n            }\n        },\n        /**\n         * 注文処理を行う処理\n         */\n        doOrder() {\n            const order = this.orders;\n            const orderData = order;\n            orderData.orderTime = new Date().toLocaleString();\n            if(orderData.table) {\n                Ajax('/api/order', 'POST', this.orders)\n                .then(res => {\n                    console.log(res);\n                });\n                alert('注文が完了しました。');\n                this.$emit('resetCart');\n            } else {\n                alert('テーブル情報がありません。');\n            }\n        }\n    },\n    emits: [\n        'resetCart',\n        'addData',\n        'getTable'\n    ]\n}\n</script>\n","import { render } from \"./CartField.vue?vue&type=template&id=405f15ce\"\nimport script from \"./CartField.vue?vue&type=script&lang=js\"\nexport * from \"./CartField.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementVNode","_hoisted_7","$props","orders","cart","length","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","order","_toDisplayString","item","merch_name","src","image","alt","_hoisted_3","price","id","_createVNode","_component_InputNumber","modelValue","amount","$event","inputId","mode","showButtons","buttonLayout","min","max","fluid","_hoisted_4","type","onClick","$options","removeOrder","_hoisted_5","_cache","args","doOrder","_hoisted_6","_hoisted_8","name","components","InputNumber","props","Object","data","methods","this","filtered","filter","elm","i","reverse","shift","orderData","orderTime","Date","toLocaleString","table","Ajax","then","res","console","log","alert","$emit","emits","__exports__","render"],"sourceRoot":""}