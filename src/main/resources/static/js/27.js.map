{"version":3,"file":"js/27.js","mappings":"kMAAAA,IAAA,EACSC,MAAM,mB,GACPC,EAAAA,EAAAA,IAAc,UAAV,SAAK,G,GAELA,EAAAA,EAAAA,IAIK,YAHDA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAa,UAAT,UAAI,G,GAPxBF,IAAA,EAkBSC,MAAM,mB,GACPC,EAAAA,EAAAA,IAGU,iBAFNA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAuB,SAApB,sBAAgB,G,GAFvBC,G,+BAlB+BC,EAAAC,OAAOC,OAAS,IAAH,WAAhDC,EAAAA,EAAAA,IAgBM,MAhBNC,EAgBM,CAfFC,GACAP,EAAAA,EAAAA,IAWQ,cAVJQ,IAIK,aACLH,EAAAA,EAAAA,IAIKI,EAAAA,GAAA,MAbjBC,EAAAA,EAAAA,IASgCR,EAAAC,QAATQ,K,WAAXN,EAAAA,EAAAA,IAIK,MAJwBP,IAAKa,EAAMC,M,EACpCZ,EAAAA,EAAAA,IAAyB,WAAAa,EAAAA,EAAAA,IAAlBF,EAAMC,MAAI,IACjBZ,EAAAA,EAAAA,IAA2B,WAAAa,EAAAA,EAAAA,IAApBF,EAAMG,QAAM,IACnBd,EAAAA,EAAAA,IAA0B,WAAAa,EAAAA,EAAAA,IAAnBF,EAAMI,OAAK,Q,SAI1Bf,EAAAA,EAAAA,IAAyD,UAAjDgB,KAAK,SAAUC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,aAAAD,EAAAC,eAAAF,KAAa,YAEPjB,EAAAoB,eAAY,WAApDjB,EAAAA,EAAAA,IAKM,MALNkB,EAlBJC,KAAAC,EAAAA,EAAAA,IAAA,M,eA6BA,GACIb,KAAM,iBACNc,IAAAA,GACI,MAAO,CACHvB,OAAQ,GACRmB,cAAc,EAEtB,EACAK,OAAAA,GACIC,KAAKC,YACLC,YAAW,KACHF,KAAKN,aAILS,QAAQC,IAAI,MAHZD,QAAQC,IAAI,KACZJ,KAAKK,WAGT,GACD,IACP,EAEAC,QAAS,CACLD,QAAAA,GACI,MAAME,EAAQC,eAAeC,QAAQ,SAClCF,IACCG,EAAAA,EAAAA,GAAK,+BAA+BH,KACnCI,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IACFd,KAAKzB,OAASuC,CAAG,GAG7B,EAEArB,WAAAA,GACI,MAAMc,EAAQC,eAAeC,QAAQ,SAClCF,IACCG,EAAAA,EAAAA,GAAK,yBAAyBH,IAAS,OAE3CP,KAAKzB,OAAS,GACdyB,KAAKN,cAAe,CACxB,EAEAO,SAAAA,GACI,MAAMM,EAAQC,eAAeC,QAAQ,SAClCF,IACCG,EAAAA,EAAAA,GAAK,qBAAqBH,KACzBI,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IACgB,UAAfA,EAAIC,OACHf,KAAKN,cAAe,EAEpBM,KAAKN,cAAe,CACxB,GAGZ,I,UC9ER,MAAMsB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://tableorder4/./src/views/UserAccounting.vue","webpack://tableorder4/./src/views/UserAccounting.vue?7771"],"sourcesContent":["<template>\n    <div class=\"accounting-wrap\" v-if=\"orders.length > 0\">\n        <h2>会計前画面</h2>\n        <table>\n            <tr>\n                <th>商品名</th>\n                <th>注文数</th>\n                <th>合計金額</th>\n            </tr>\n            <tr v-for=\"order in orders\" :key=\"order.name\">\n                <td>{{ order.name }}</td>\n                <td>{{ order.amount }}</td>\n                <td>{{ order.price }}</td>\n            </tr>\n        </table>\n        \n        <button type=\"button\" @click=\"finishOrder\">会計を行う</button>\n    </div>\n    <div class=\"accounting-wrap\" v-else-if=\"isAccounting\">\n        <section>\n            <h2>お会計待ちの状態です。</h2>\n            <p>レジでお会計を行なってください。</p>\n        </section>\n    </div>\n</template>\n\n<script>\nimport Ajax from '@/lib/Ajax';\n\nexport default {\n    name: 'UserAccounting',\n    data() {\n        return {\n            orders: [],\n            isAccounting: false\n        }\n    },\n    mounted() {\n        this.getStatus();\n        setTimeout(() => {\n            if(!this.isAccounting) {\n                console.log('a');\n                this.getOrder();\n            } else {\n                console.log('b');\n            }\n        }, 200);\n    },\n\n    methods: {\n        getOrder() {\n            const table = sessionStorage.getItem('table');\n            if(table) {\n                Ajax(`/api/order/accounting/table/${table}`)\n                .then(res => res.json())\n                .then(dat => {\n                    this.orders = dat;\n                });\n            }\n        },\n\n        finishOrder() {\n            const table = sessionStorage.getItem('table');\n            if(table) {\n                Ajax(`/api/order/accounting/${table}`, 'PUT');\n            }\n            this.orders = [];\n            this.isAccounting = true;\n        },\n\n        getStatus() {\n            const table = sessionStorage.getItem('table');\n            if(table) {\n                Ajax(`/api/table/status/${table}`)\n                .then(res => res.json())\n                .then(dat => {\n                    if(dat.status === 'お会計待ち') {\n                        this.isAccounting = true;\n                    } else {\n                        this.isAccounting = false;\n                    }\n                });\n            }\n        }\n    }\n}\n</script>\n","import { render } from \"./UserAccounting.vue?vue&type=template&id=592b80f4\"\nimport script from \"./UserAccounting.vue?vue&type=script&lang=js\"\nexport * from \"./UserAccounting.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementVNode","_hoisted_5","$data","orders","length","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","order","name","_toDisplayString","amount","price","type","onClick","_cache","args","$options","finishOrder","isAccounting","_hoisted_4","_hoisted_6","_createCommentVNode","data","mounted","this","getStatus","setTimeout","console","log","getOrder","methods","table","sessionStorage","getItem","Ajax","then","res","json","dat","status","__exports__","render"],"sourceRoot":""}